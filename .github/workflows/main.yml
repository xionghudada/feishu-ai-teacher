name: AI è€å¸ˆè‡ªåŠ¨æ‰¹æ”¹ä½œä¸š (å¯’å‡ç‰ˆ)

on:
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨è§¦å‘
  
  schedule:
    # =======================================================
    # ğŸ—“ï¸ å¯’å‡æ¨¡å¼ï¼šæ¯å¤© (Daily)
    # ç›®æ ‡ï¼šåŒ—äº¬æ—¶é—´ 09:00 - 22:00 (æ¯å°æ—¶ä¸€æ¬¡ï¼Œæ•´ç‚¹)
    # UTC è½¬æ¢: -8 å°æ—¶
    # =======================================================
    
    # åŒ—äº¬ 09:00 (UTC 01:00) å¼€å§‹
    # ...
    # åŒ—äº¬ 22:00 (UTC 14:00) ç»“æŸ (ä¹‹åè¿›å…¥é™é»˜ç›´åˆ°æ¬¡æ—¥)
    
    - cron: '0 1-14 * * *'

jobs:
  grade_homework:
    runs-on: ubuntu-latest
    
    steps:
    - name: æ‹‰å–ä»£ç 
      uses: actions/checkout@v3
      
    - name: è®¾ç½® Python ç¯å¢ƒ
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: å®‰è£…ä¾èµ–åº“
      run: |
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
        
    - name: è¿è¡Œæ‰¹æ”¹è„šæœ¬
      env:
        APP_ID: ${{ secrets.APP_ID }}
        APP_SECRET: ${{ secrets.APP_SECRET }}
        APP_TOKEN: ${{ secrets.APP_TOKEN }}
        TABLE_ID: ${{ secrets.TABLE_ID }}
        AI_API_KEY: ${{ secrets.AI_API_KEY }}
      run: python main.py
